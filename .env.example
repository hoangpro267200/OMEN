# ═══════════════════════════════════════════════════════════════════════════════
# OMEN Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════════
#
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# IMPORTANT: Never commit .env to version control!
# ═══════════════════════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════════════════════
# ENVIRONMENT
# ═══════════════════════════════════════════════════════════════════════════════

# Environment mode: development | production
# - development: Auth bypassed with warning, more verbose logging
# - production: Full auth enforcement, structured logging
OMEN_ENV=development

# ═══════════════════════════════════════════════════════════════════════════════
# SECURITY & AUTHENTICATION
# ═══════════════════════════════════════════════════════════════════════════════

# API Keys (comma-separated for multiple keys)
# Generate secure keys for production: openssl rand -hex 32
OMEN_SECURITY_API_KEYS=your-api-key-here

# Rate Limiting
OMEN_SECURITY_RATE_LIMIT_ENABLED=false
OMEN_SECURITY_RATE_LIMIT_REQUESTS_PER_MINUTE=600
OMEN_SECURITY_RATE_LIMIT_BURST=100

# ═══════════════════════════════════════════════════════════════════════════════
# DATA SOURCE PROVIDERS
# ═══════════════════════════════════════════════════════════════════════════════

# AIS Ship Tracking
# Provider options: mock | marinetraffic | vesselfinder | aishub
OMEN_AIS_PROVIDER=mock
# OMEN_AIS_API_KEY=your_ais_api_key

# Weather
# Provider options: mock | openweather
OMEN_WEATHER_PROVIDER=openweather
OMEN_WEATHER_OPENWEATHER_API_KEY=your_openweather_api_key

# Freight Rates
# Provider options: mock | freightos | xeneta | drewry
OMEN_FREIGHT_PROVIDER=mock
# OMEN_FREIGHT_API_KEY=your_freight_api_key

# Stock Data
# Provider options: yfinance | vnstock | both | mock
STOCK_PROVIDER=both
STOCK_ENABLE_YFINANCE=true
STOCK_ENABLE_VNSTOCK=true

# ═══════════════════════════════════════════════════════════════════════════════
# EXTERNAL API KEYS
# ═══════════════════════════════════════════════════════════════════════════════

# NewsAPI.org - For news signals
# Get free key at: https://newsapi.org/register
NEWS_API_KEY=your_newsapi_key

# AlphaVantage - For commodity data
# Get free key at: https://www.alphavantage.co/support/#api-key
ALPHAVANTAGE_API_KEY=your_alphavantage_key

# Polymarket - Uses public API, no key required
# POLYMARKET_API_KEY=optional_for_higher_rate_limits

# ═══════════════════════════════════════════════════════════════════════════════
# OPTIONAL: INFRASTRUCTURE
# ═══════════════════════════════════════════════════════════════════════════════

# Redis (for production caching and rate limiting)
# OMEN_REDIS_URL=redis://localhost:6379/0

# Cache Backend: memory | redis
OMEN_CACHE_BACKEND=memory

# Logging
OMEN_LOG_LEVEL=INFO
OMEN_LOG_JSON=true

# ═══════════════════════════════════════════════════════════════════════════════
# CORS (Production)
# ═══════════════════════════════════════════════════════════════════════════════

# Allowed origins (comma-separated)
# OMEN_CORS_ORIGINS=https://app.omen.ai,https://admin.omen.ai

# ═══════════════════════════════════════════════════════════════════════════════
# DATABASE (PostgreSQL)
# ═══════════════════════════════════════════════════════════════════════════════

# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://omen:omen_dev_password@localhost:5432/omen_db

# Docker Compose password (used when running with docker-compose)
POSTGRES_PASSWORD=omen_dev_password

# Connection pool settings
DB_POOL_MIN=5
DB_POOL_MAX=20

# ═══════════════════════════════════════════════════════════════════════════════
# LIVE MODE GATE
# ═══════════════════════════════════════════════════════════════════════════════
#
# CRITICAL: The live gate prevents production mode until real data sources
# meet the minimum coverage threshold. Keep OMEN_ALLOW_LIVE_MODE=false
# until you have verified 80%+ real source coverage.
#
# Current OMEN status: 2/7 REAL sources (29% coverage)
# Required for LIVE mode: 80%+ coverage
#

# Master switch for LIVE mode (keep false until ready)
OMEN_ALLOW_LIVE_MODE=false

# Minimum ratio of REAL sources required for LIVE mode (0.0 - 1.0)
OMEN_MIN_REAL_SOURCE_RATIO=0.80

# Gate status cache TTL in seconds (avoid DB spam on every request)
OMEN_GATE_CACHE_TTL_SECONDS=30

# ═══════════════════════════════════════════════════════════════════════════════
# DATA RETENTION
# ═══════════════════════════════════════════════════════════════════════════════

# Raw API inputs retention (hours)
OMEN_RAW_INPUT_RETENTION_HOURS=72

# Ingestion logs retention (days)
OMEN_INGESTION_LOG_RETENTION_DAYS=30

# API access logs retention (days)
OMEN_API_LOG_RETENTION_DAYS=90

# Signal archive threshold (days before archiving)
OMEN_SIGNAL_ARCHIVE_AFTER_DAYS=90
