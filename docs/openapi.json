{
  "openapi": "3.1.0",
  "info": {
    "title": "OMEN Signal Intelligence API",
    "description": "## Signal Intelligence Engine\n\nOMEN transforms market events into structured probability signals.\n\n### Authentication\n\nAll API endpoints require authentication via API key.\nInclude the `X-API-Key` header in all requests.\n\n**Public endpoints (no auth required):**\n- `/health/*` - Health checks\n- `/docs`, `/redoc` - API documentation\n- `/metrics` - Prometheus metrics\n\n### What OMEN provides\n- Probability assessment with confidence bounds\n- Signal validation and quality scoring\n- Geographic and temporal context\n- Full evidence chain and traceability\n\n### What OMEN does NOT provide\n- Impact assessment (severity, delay, cost)\n- Decision steering (temporal proximity, relevance rank, high-confidence flags)\n- Recommendations or advice\n- Risk quantification\n\nImpact assessment is the responsibility of downstream systems.",
    "version": "2.0.0",
    "x-logo": {
      "url": "https://omen.io/logo.png",
      "altText": "OMEN Logo"
    },
    "contact": {
      "name": "OMEN API Support",
      "url": "https://github.com/omen/omen",
      "email": "support@omen.io"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "paths": {
    "/health/": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health Check",
        "description": "Basic health check.\nReturns 503 during shutdown so load balancers stop sending traffic.",
        "operationId": "health_check_health__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health/ready": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Readiness Check",
        "description": "Readiness check (e.g. Kubernetes).\nReturns 503 if not ready to serve traffic (e.g. shutting down).",
        "operationId": "readiness_check_health_ready_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health/live": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Liveness Check",
        "description": "Liveness check.",
        "operationId": "liveness_check_health_live_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health/sources": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Check all data sources health",
        "description": "Returns health status for all registered data sources.",
        "operationId": "check_all_sources_health_health_sources_get",
        "parameters": [
          {
            "name": "force",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Bypass cache and force fresh checks",
              "default": false,
              "title": "Force"
            },
            "description": "Bypass cache and force fresh checks"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SourceHealthSummary"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/health/sources/{source_name}": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Check specific source health",
        "description": "Returns health status for a specific data source.",
        "operationId": "check_source_health_health_sources__source_name__get",
        "parameters": [
          {
            "name": "source_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Source Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthCheckResult"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/health/sources/list": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "List registered sources",
        "description": "Returns list of all registered data sources.",
        "operationId": "list_registered_sources_health_sources_list_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response List Registered Sources Health Sources List Get"
                }
              }
            }
          }
        }
      }
    },
    "/metrics": {
      "get": {
        "tags": [
          "Metrics",
          "metrics"
        ],
        "summary": "Metrics Endpoint",
        "description": "Prometheus metrics endpoint.\n\nReturns metrics in Prometheus text format.\nScrape this endpoint with Prometheus.",
        "operationId": "metrics_endpoint_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "tags": [
          "Root"
        ],
        "summary": "Root",
        "description": "Root endpoint - public.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/signals/stats": {
      "get": {
        "tags": [
          "Signals"
        ],
        "summary": "Get pipeline statistics",
        "description": "Get pipeline processing statistics for the signal-only path.\n\nReturns counts, pass rates, and latency metrics. No impact or recommendation data.\n\n**Example Response:**\n```json\n{\n    \"total_processed\": 1500,\n    \"total_passed\": 1250,\n    \"total_rejected\": 250,\n    \"pass_rate\": 0.833,\n    \"rejection_by_stage\": {\n        \"liquidity\": 150,\n        \"semantic\": 60,\n        \"geographic\": 40\n    },\n    \"latency_ms\": 45,\n    \"uptime_seconds\": 86400\n}\n```",
        "operationId": "get_signal_stats_api_v1_signals_stats_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pipeline statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PipelineStatsResponse"
                },
                "example": {
                  "items": [
                    {
                      "signal_id": "sig-poly-12345",
                      "signal_type": "MARKET_MOVEMENT",
                      "title": "Polymarket: US Election probability shift",
                      "description": "Significant movement in election prediction markets",
                      "probability": 0.65,
                      "confidence": 0.88,
                      "keywords": [
                        "election",
                        "politics",
                        "prediction"
                      ],
                      "source": "polymarket",
                      "timestamp": "2026-02-01T10:00:00Z"
                    }
                  ],
                  "has_more": false,
                  "cursor": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/signals/batch": {
      "post": {
        "tags": [
          "Signals"
        ],
        "summary": "Create Signals Batch",
        "description": "Fetch events, run signal-only pipeline (validate → enrich → signal), return structured signals.\n\nThis is the Signal Intelligence contract: probability, confidence, context, evidence.\nNo impact calculations, no recommendations, no time-horizon or high-confidence flags.",
        "operationId": "create_signals_batch_api_v1_signals_batch_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "min_liquidity",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 1000,
              "title": "Min Liquidity"
            }
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.0,
              "title": "Min Confidence"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SignalListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/signals/": {
      "get": {
        "tags": [
          "Signals"
        ],
        "summary": "List recent signals",
        "description": "List recent signals with pagination.\n\n**Query Parameters:**\n- `limit`: Max signals to return (default: 100, max: 1000)\n- `offset`: Pagination offset (default: 0)\n- `since`: Only return signals after this timestamp (ISO 8601)\n\n**Example Request:**\n```\nGET /api/v1/signals/?limit=10&since=2026-01-01T00:00:00Z\n```\n\n**Response includes:**\n- List of redacted signals\n- Pagination metadata (total, limit, offset)",
        "operationId": "list_signals_api_v1_signals__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "description": "Maximum number of signals to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of signals to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          },
          {
            "name": "since",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Only return signals after this timestamp",
              "title": "Since"
            },
            "description": "Only return signals after this timestamp"
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of signals",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response List Signals Api V1 Signals  Get"
                },
                "example": {
                  "items": [
                    {
                      "signal_id": "sig-poly-12345",
                      "signal_type": "MARKET_MOVEMENT",
                      "title": "Polymarket: US Election probability shift",
                      "description": "Significant movement in election prediction markets",
                      "probability": 0.65,
                      "confidence": 0.88,
                      "keywords": [
                        "election",
                        "politics",
                        "prediction"
                      ],
                      "source": "polymarket",
                      "timestamp": "2026-02-01T10:00:00Z"
                    }
                  ],
                  "has_more": false,
                  "cursor": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/signals/{signal_id}": {
      "get": {
        "tags": [
          "Signals"
        ],
        "summary": "Get signal by ID",
        "description": "Get a single signal by its unique identifier.\n\n**Detail Levels:**\n- `minimal`: Basic fields only (signal_id, title, probability, confidence_level)\n- `standard`: Default - includes evidence and geographic context\n- `full`: All fields including confidence breakdown\n\n**Example Request:**\n```\nGET /api/v1/signals/OMEN-A1B2C3D4E5F6?detail_level=full\n```",
        "operationId": "get_signal_api_v1_signals__signal_id__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "signal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Signal Id"
            }
          },
          {
            "name": "detail_level",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "minimal",
                "standard",
                "full"
              ],
              "type": "string",
              "description": "Level of detail to include in response",
              "default": "standard",
              "title": "Detail Level"
            },
            "description": "Level of detail to include in response"
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Signal details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Signal Api V1 Signals  Signal Id  Get"
                },
                "example": {
                  "signal_id": "OMEN-A1B2C3D4E5F6",
                  "source_event_id": "poly-12345",
                  "title": "Red Sea shipping disruption probability increases",
                  "probability": 0.72,
                  "probability_source": "polymarket",
                  "confidence_score": 0.85,
                  "confidence_level": "HIGH",
                  "confidence_factors": {
                    "liquidity": 0.9,
                    "geographic": 0.85,
                    "source_reliability": 0.8
                  },
                  "category": "GEOPOLITICAL",
                  "geographic": {
                    "regions": [
                      "Middle East",
                      "Red Sea"
                    ],
                    "chokepoints": [
                      "bab-el-mandeb",
                      "suez"
                    ]
                  },
                  "temporal": {
                    "event_horizon": "2026-06-30",
                    "resolution_date": "2026-06-30T00:00:00Z"
                  },
                  "evidence": [
                    {
                      "source": "Polymarket",
                      "source_type": "market",
                      "url": "https://polymarket.com/market/xyz"
                    }
                  ],
                  "trace_id": "a1b2c3d4e5f6g7h8",
                  "generated_at": "2026-02-01T12:00:00Z"
                }
              }
            }
          },
          "404": {
            "description": "Signal not found",
            "content": {
              "application/json": {
                "example": {
                  "error": "NOT_FOUND",
                  "message": "Signal 'OMEN-INVALID' not found",
                  "hint": "Verify the signal ID is correct and exists"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/signals/{signal_id}/explanation": {
      "get": {
        "tags": [
          "Explanations"
        ],
        "summary": "Get Signal Explanation",
        "description": "Get detailed explanation for a signal.\n\nFormats:\n- json: Machine-readable audit format\n- text: Human-readable report",
        "operationId": "get_signal_explanation_api_v1_signals__signal_id__explanation_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "signal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Signal Id"
            }
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "json",
              "title": "Format"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/parameters": {
      "get": {
        "tags": [
          "Explanations"
        ],
        "summary": "List All Parameters",
        "description": "List all rule parameters used by OMEN.\n\nUseful for:\n- Documentation\n- Auditing assumptions\n- Parameter sensitivity analysis",
        "operationId": "list_all_parameters_api_v1_parameters_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/live/signals": {
      "post": {
        "tags": [
          "Live Data",
          "Live Data"
        ],
        "summary": "Process market events into signals",
        "description": "Transforms market events into structured intelligence signals.\n\n    Output contains probability, confidence, and context only.\n    Output does NOT contain impact assessment or decision steering.\n\n    Downstream consumers (e.g. RiskCast) are responsible for:\n    - Impact severity calculation\n    - Time-horizon or relevance determination\n    - High-confidence or relevance assessment\n    - Risk quantification\n    \n    **Requires scope:** `write:signals`",
        "operationId": "process_live_events_api_v1_live_signals_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 2000,
              "default": 500,
              "title": "Limit"
            }
          },
          {
            "name": "min_liquidity",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 1000,
              "title": "Min Liquidity"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SignalResponse"
                  },
                  "title": "Response Process Live Events Api V1 Live Signals Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/live/signals/{event_id}": {
      "post": {
        "tags": [
          "Live Data",
          "Live Data"
        ],
        "summary": "Process Single Event",
        "description": "Process a single event by ID. Returns pure signal or rejection reason.\n\n**Requires scope:** `write:signals`",
        "operationId": "process_single_event_api_v1_live_signals__event_id__post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Process Single Event Api V1 Live Signals  Event Id  Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/metrics/circuit-breakers": {
      "get": {
        "tags": [
          "Circuit Breaker",
          "metrics"
        ],
        "summary": "Get Circuit Breaker Stats",
        "description": "Get circuit breaker statistics for monitoring.\n\nReturns current state and metrics for registered circuit breakers.\nRiskCast hot path circuit is present when an emitter has been used.",
        "operationId": "get_circuit_breaker_stats_api_v1_metrics_circuit_breakers_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/metrics/circuit-breakers/{name}": {
      "patch": {
        "tags": [
          "Circuit Breaker",
          "metrics"
        ],
        "summary": "Update Circuit Breaker",
        "description": "Update circuit breaker state.\n\nSet state='closed' to reset the circuit breaker.\nUse only when downstream service is confirmed healthy.",
        "operationId": "update_circuit_breaker_api_v1_metrics_circuit_breakers__name__patch",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Name"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CircuitBreakerUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/storage/stats": {
      "get": {
        "tags": [
          "Storage",
          "storage"
        ],
        "summary": "Get Storage Stats",
        "description": "Get ledger storage statistics.",
        "operationId": "get_storage_stats_api_v1_storage_stats_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Storage Stats Api V1 Storage Stats Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/storage/lifecycle/tasks": {
      "post": {
        "tags": [
          "Storage",
          "storage"
        ],
        "summary": "Create Lifecycle Tasks",
        "description": "Create and run lifecycle tasks (seal, compress, archive, delete).",
        "operationId": "create_lifecycle_tasks_api_v1_storage_lifecycle_tasks_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Create Lifecycle Tasks Api V1 Storage Lifecycle Tasks Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/stats": {
      "get": {
        "tags": [
          "Statistics",
          "Statistics"
        ],
        "summary": "Get System Stats",
        "description": "Get current system statistics (signal-quality only).\n\nNo impact metrics. Values from real pipeline execution.",
        "operationId": "get_system_stats_api_v1_stats_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/activity": {
      "get": {
        "tags": [
          "Activity",
          "Activity"
        ],
        "summary": "Get Activity",
        "description": "Get recent activity from the OMEN system.\n\nAll activity comes from real pipeline execution and source fetches:\n- signal: When signals are generated\n- validation: When events pass or fail validation\n- rule: When translation rules are applied\n- alert: When high-confidence signals are created\n- source: When data is fetched from sources\n- error: When errors occur\n\nIf the pipeline has not run, the list is empty.",
        "operationId": "get_activity_api_v1_activity_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "description": "Maximum items to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum items to return"
          },
          {
            "name": "type_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by type: signal, validation, rule, alert, source, error, system",
              "title": "Type Filter"
            },
            "description": "Filter by type: signal, validation, rule, alert, source, error, system"
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ActivityItemResponse"
                  },
                  "title": "Response Get Activity Api V1 Activity Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/activity/types": {
      "get": {
        "tags": [
          "Activity",
          "Activity"
        ],
        "summary": "Get Activity Types",
        "description": "Return available activity types and short descriptions.",
        "operationId": "get_activity_types_api_v1_activity_types_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Get Activity Types Api V1 Activity Types Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/realtime/subscribe": {
      "post": {
        "tags": [
          "Realtime",
          "Real-time"
        ],
        "summary": "Subscribe Signals",
        "description": "Subscribe to real-time price updates for signals.\n\nOnly signals that have been processed by the pipeline and have\nvalid token mappings can be subscribed to.",
        "operationId": "subscribe_signals_api_v1_realtime_subscribe_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubscribeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscribeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/realtime/prices": {
      "get": {
        "tags": [
          "Realtime",
          "Real-time"
        ],
        "summary": "Stream Prices",
        "description": "Server-Sent Events stream of real-time price updates.\n\nEvent types:\n- status: Connection status\n- data: Price update (default)\n- error: Error occurred\n- ping: Keepalive\n\nReturns immediately if not in streaming mode (for quick status check).",
        "operationId": "stream_prices_api_v1_realtime_prices_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/realtime/status": {
      "get": {
        "tags": [
          "Realtime",
          "Real-time"
        ],
        "summary": "Get Realtime Status",
        "description": "Get current status of real-time streaming.",
        "operationId": "get_realtime_status_api_v1_realtime_status_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RealtimeStatus"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/realtime/unsubscribe": {
      "post": {
        "tags": [
          "Realtime",
          "Real-time"
        ],
        "summary": "Unsubscribe Signals",
        "description": "Unsubscribe from signals.",
        "operationId": "unsubscribe_signals_api_v1_realtime_unsubscribe_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubscribeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "title": "Response Unsubscribe Signals Api V1 Realtime Unsubscribe Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/methodology": {
      "get": {
        "tags": [
          "Methodology",
          "Methodology"
        ],
        "summary": "List Methodologies",
        "description": "List documented validation methodologies.\n\nImpact methodologies (Red Sea, etc.) are in the omen_impact package.",
        "operationId": "list_methodologies_api_v1_methodology_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/MethodologySummary"
                    }
                  },
                  "title": "Response List Methodologies Api V1 Methodology Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/methodology/for-metric/{metric_name}": {
      "get": {
        "tags": [
          "Methodology",
          "Methodology"
        ],
        "summary": "Get Methodology For Metric",
        "description": "Get the methodology for a validation metric (e.g. liquidity, geographic).\n\nFor impact metrics use the omen_impact package.",
        "operationId": "get_methodology_for_metric_api_v1_methodology_for_metric__metric_name__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "metric_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Metric Name"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MethodologyDetail"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/methodology/{category}/{name}": {
      "get": {
        "tags": [
          "Methodology",
          "Methodology"
        ],
        "summary": "Get Methodology Detail",
        "description": "Get full details of a validation methodology.\n\ncategory must be 'validation'. Impact methodologies are in omen_impact.",
        "operationId": "get_methodology_detail_api_v1_methodology__category___name__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "category",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Category"
            }
          },
          {
            "name": "name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Name"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MethodologyDetail"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/multi-source/sources": {
      "get": {
        "tags": [
          "Multi-Source Intelligence"
        ],
        "summary": "List Sources",
        "description": "List all registered signal sources and their status.\n\nReturns health status of each source:\n- Polymarket: Prediction market data\n- AIS: Ship tracking, port congestion\n- Weather: Storm alerts, sea conditions\n- Freight: Container rates, capacity",
        "operationId": "list_sources_api_v1_multi_source_sources_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SourceHealthResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/multi-source/signals": {
      "get": {
        "tags": [
          "Multi-Source Intelligence"
        ],
        "summary": "Get Multi Source Signals",
        "description": "Get signals from multiple sources.\n\nSources:\n- polymarket: Prediction market signals\n- ais: Port congestion, chokepoint delays\n- weather: Storm alerts, sea conditions\n- freight: Rate spikes, capacity alerts\n\nSignals are combined and sorted by timestamp.",
        "operationId": "get_multi_source_signals_api_v1_multi_source_signals_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit_per_source",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "default": 20,
              "title": "Limit Per Source"
            }
          },
          {
            "name": "sources",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated source names (e.g., 'ais,weather,freight')",
              "title": "Sources"
            },
            "description": "Comma-separated source names (e.g., 'ais,weather,freight')"
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MultiSourceResponse"
                },
                "example": {
                  "items": [
                    {
                      "signal_id": "sig-poly-12345",
                      "signal_type": "MARKET_MOVEMENT",
                      "title": "Polymarket: US Election probability shift",
                      "description": "Significant movement in election prediction markets",
                      "probability": 0.65,
                      "confidence": 0.88,
                      "keywords": [
                        "election",
                        "politics",
                        "prediction"
                      ],
                      "source": "polymarket",
                      "timestamp": "2026-02-01T10:00:00Z"
                    }
                  ],
                  "has_more": false,
                  "cursor": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/multi-source/sources/{source_name}": {
      "patch": {
        "tags": [
          "Multi-Source Intelligence"
        ],
        "summary": "Update Source",
        "description": "Update a signal source configuration.\n\nSet enabled=true to enable, enabled=false to disable.",
        "operationId": "update_source_api_v1_multi_source_sources__source_name__patch",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "source_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Source Name"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SourceUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Update Source Api V1 Multi Source Sources  Source Name  Patch"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/multi-source/sources/{source_name}/signals": {
      "get": {
        "tags": [
          "Multi-Source Intelligence"
        ],
        "summary": "Get Single Source Signals",
        "description": "Get signals from a specific source.",
        "operationId": "get_single_source_signals_api_v1_multi_source_sources__source_name__signals_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "source_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Source Name"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MultiSourceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-signals/": {
      "get": {
        "tags": [
          "Partner Signals",
          "Partner Signals"
        ],
        "summary": "Get signals for all monitored partners",
        "description": "Returns raw signal metrics for logistics partners.\n    \n    **IMPORTANT**: This endpoint returns SIGNALS only, not risk decisions.\n    \n    RiskCast should use these signals to make risk assessments based on:\n    - Order context\n    - User risk appetite\n    - Business rules\n    \n    **OMEN does NOT make risk decisions.**\n    \n    Response includes:\n    - `signals`: Raw metrics (price, volume, fundamentals)\n    - `evidence`: Evidence trail for audit\n    - `confidence`: Data quality indicators\n    - `omen_suggestion`: Optional suggestion (NOT a decision)\n    \n    Response does NOT include:\n    - `risk_status`\n    - `overall_risk`\n    - `risk_breakdown`",
        "operationId": "get_all_partner_signals_api_v1_partner_signals__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "symbols",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated list of symbols (default: GMD,HAH,VOS,VSC,PVT)",
              "title": "Symbols"
            },
            "description": "Comma-separated list of symbols (default: GMD,HAH,VOS,VSC,PVT)",
            "example": "HAH,GMD,VOS"
          },
          {
            "name": "include_evidence",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include signal evidence in response",
              "default": true,
              "title": "Include Evidence"
            },
            "description": "Include signal evidence in response"
          },
          {
            "name": "include_market_context",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include market context (VNINDEX, sector)",
              "default": false,
              "title": "Include Market Context"
            },
            "description": "Include market context (VNINDEX, sector)"
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Signals retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PartnerSignalsListResponse"
                },
                "example": {
                  "timestamp": "2026-02-01T10:00:00Z",
                  "total_partners": 1,
                  "partners": [
                    {
                      "symbol": "GMD",
                      "company_name": "Gemadept Corporation",
                      "signals": {
                        "price_current": 68.5,
                        "price_previous_close": 67.9,
                        "price_change_percent": 0.88,
                        "volume": 1901300,
                        "volume_avg_20d": 1500000,
                        "volatility_20d": 0.023,
                        "liquidity_score": 0.85,
                        "trend_20d": 3.2,
                        "zscore_price": 0.45
                      },
                      "confidence": {
                        "overall_confidence": 0.91,
                        "data_completeness": 0.95,
                        "data_freshness_seconds": 120,
                        "price_data_confidence": 1.0,
                        "fundamental_data_confidence": 0.0,
                        "volume_data_confidence": 1.0,
                        "missing_fields": [],
                        "data_source": "vnstock",
                        "data_source_reliability": 0.95,
                        "confidence_interval": {
                          "point_estimate": 0.91,
                          "lower_bound": 0.85,
                          "upper_bound": 0.97,
                          "confidence_level": 0.95,
                          "method": "weighted_bayesian"
                        }
                      },
                      "evidence": [
                        {
                          "evidence_id": "GMD-PRICE-20260201100000",
                          "evidence_type": "PRICE_CHANGE",
                          "title": "GMD price increased 0.88%",
                          "raw_value": 0.88,
                          "normalized_value": 0.088,
                          "source": "vnstock",
                          "timestamp": "2026-02-01T10:00:00Z"
                        }
                      ],
                      "timestamp": "2026-02-01T10:00:00Z"
                    }
                  ]
                }
              }
            }
          },
          "503": {
            "description": "Data source unavailable"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-signals/partners": {
      "get": {
        "tags": [
          "Partner Signals",
          "Partner Signals"
        ],
        "summary": "List all monitored logistics partners",
        "description": "Returns metadata about each partner company.",
        "operationId": "list_partners_api_v1_partner_signals_partners_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response List Partners Api V1 Partner Signals Partners Get"
                },
                "example": {
                  "timestamp": "2026-02-01T10:00:00Z",
                  "total_partners": 1,
                  "partners": [
                    {
                      "symbol": "GMD",
                      "company_name": "Gemadept Corporation",
                      "signals": {
                        "price_current": 68.5,
                        "price_previous_close": 67.9,
                        "price_change_percent": 0.88,
                        "volume": 1901300,
                        "volume_avg_20d": 1500000,
                        "volatility_20d": 0.023,
                        "liquidity_score": 0.85,
                        "trend_20d": 3.2,
                        "zscore_price": 0.45
                      },
                      "confidence": {
                        "overall_confidence": 0.91,
                        "data_completeness": 0.95,
                        "data_freshness_seconds": 120,
                        "price_data_confidence": 1.0,
                        "fundamental_data_confidence": 0.0,
                        "volume_data_confidence": 1.0,
                        "missing_fields": [],
                        "data_source": "vnstock",
                        "data_source_reliability": 0.95,
                        "confidence_interval": {
                          "point_estimate": 0.91,
                          "lower_bound": 0.85,
                          "upper_bound": 0.97,
                          "confidence_level": 0.95,
                          "method": "weighted_bayesian"
                        }
                      },
                      "evidence": [
                        {
                          "evidence_id": "GMD-PRICE-20260201100000",
                          "evidence_type": "PRICE_CHANGE",
                          "title": "GMD price increased 0.88%",
                          "raw_value": 0.88,
                          "normalized_value": 0.088,
                          "source": "vnstock",
                          "timestamp": "2026-02-01T10:00:00Z"
                        }
                      ],
                      "timestamp": "2026-02-01T10:00:00Z"
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-signals/{symbol}": {
      "get": {
        "tags": [
          "Partner Signals",
          "Partner Signals"
        ],
        "summary": "Get signals for a specific partner",
        "description": "Returns detailed signals for a single logistics partner.\n    \n    **IMPORTANT**: Returns SIGNALS only, not risk decisions.",
        "operationId": "get_partner_signal_api_v1_partner_signals__symbol__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "symbol",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Symbol"
            }
          },
          {
            "name": "include_evidence",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include signal evidence",
              "default": true,
              "title": "Include Evidence"
            },
            "description": "Include signal evidence"
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PartnerSignalResponse"
                },
                "example": {
                  "symbol": "GMD",
                  "company_name": "Gemadept Corporation",
                  "signals": {
                    "price_current": 68.5,
                    "price_previous_close": 67.9,
                    "price_change_percent": 0.88,
                    "volume": 1901300,
                    "volume_avg_20d": 1500000,
                    "volatility_20d": 0.023,
                    "liquidity_score": 0.85,
                    "trend_20d": 3.2,
                    "zscore_price": 0.45
                  },
                  "confidence": {
                    "overall_confidence": 0.91,
                    "data_completeness": 0.95,
                    "data_freshness_seconds": 120,
                    "price_data_confidence": 1.0,
                    "fundamental_data_confidence": 0.0,
                    "volume_data_confidence": 1.0,
                    "missing_fields": [],
                    "data_source": "vnstock",
                    "data_source_reliability": 0.95,
                    "confidence_interval": {
                      "point_estimate": 0.91,
                      "lower_bound": 0.85,
                      "upper_bound": 0.97,
                      "confidence_level": 0.95,
                      "method": "weighted_bayesian"
                    }
                  },
                  "evidence": [
                    {
                      "evidence_id": "GMD-PRICE-20260201100000",
                      "evidence_type": "PRICE_CHANGE",
                      "title": "GMD price increased 0.88%",
                      "raw_value": 0.88,
                      "normalized_value": 0.088,
                      "source": "vnstock",
                      "timestamp": "2026-02-01T10:00:00Z"
                    }
                  ],
                  "timestamp": "2026-02-01T10:00:00Z"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-signals/{symbol}/price": {
      "get": {
        "tags": [
          "Partner Signals",
          "Partner Signals"
        ],
        "summary": "Get raw price data for a partner",
        "description": "Returns real-time price data without any risk assessment.",
        "operationId": "get_partner_price_api_v1_partner_signals__symbol__price_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "symbol",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Symbol"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Partner Price Api V1 Partner Signals  Symbol  Price Get"
                },
                "example": {
                  "symbol": "GMD",
                  "company_name": "Gemadept Corporation",
                  "signals": {
                    "price_current": 68.5,
                    "price_previous_close": 67.9,
                    "price_change_percent": 0.88,
                    "volume": 1901300,
                    "volume_avg_20d": 1500000,
                    "volatility_20d": 0.023,
                    "liquidity_score": 0.85,
                    "trend_20d": 3.2,
                    "zscore_price": 0.45
                  },
                  "confidence": {
                    "overall_confidence": 0.91,
                    "data_completeness": 0.95,
                    "data_freshness_seconds": 120,
                    "price_data_confidence": 1.0,
                    "fundamental_data_confidence": 0.0,
                    "volume_data_confidence": 1.0,
                    "missing_fields": [],
                    "data_source": "vnstock",
                    "data_source_reliability": 0.95,
                    "confidence_interval": {
                      "point_estimate": 0.91,
                      "lower_bound": 0.85,
                      "upper_bound": 0.97,
                      "confidence_level": 0.95,
                      "method": "weighted_bayesian"
                    }
                  },
                  "evidence": [
                    {
                      "evidence_id": "GMD-PRICE-20260201100000",
                      "evidence_type": "PRICE_CHANGE",
                      "title": "GMD price increased 0.88%",
                      "raw_value": 0.88,
                      "normalized_value": 0.088,
                      "source": "vnstock",
                      "timestamp": "2026-02-01T10:00:00Z"
                    }
                  ],
                  "timestamp": "2026-02-01T10:00:00Z"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-signals/{symbol}/fundamentals": {
      "get": {
        "tags": [
          "Partner Signals",
          "Partner Signals"
        ],
        "summary": "Get fundamental health indicators",
        "description": "Returns PE, ROE, and other fundamental metrics without risk classification.",
        "operationId": "get_partner_fundamentals_api_v1_partner_signals__symbol__fundamentals_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "symbol",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Symbol"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Partner Fundamentals Api V1 Partner Signals  Symbol  Fundamentals Get"
                },
                "example": {
                  "symbol": "GMD",
                  "company_name": "Gemadept Corporation",
                  "signals": {
                    "price_current": 68.5,
                    "price_previous_close": 67.9,
                    "price_change_percent": 0.88,
                    "volume": 1901300,
                    "volume_avg_20d": 1500000,
                    "volatility_20d": 0.023,
                    "liquidity_score": 0.85,
                    "trend_20d": 3.2,
                    "zscore_price": 0.45
                  },
                  "confidence": {
                    "overall_confidence": 0.91,
                    "data_completeness": 0.95,
                    "data_freshness_seconds": 120,
                    "price_data_confidence": 1.0,
                    "fundamental_data_confidence": 0.0,
                    "volume_data_confidence": 1.0,
                    "missing_fields": [],
                    "data_source": "vnstock",
                    "data_source_reliability": 0.95,
                    "confidence_interval": {
                      "point_estimate": 0.91,
                      "lower_bound": 0.85,
                      "upper_bound": 0.97,
                      "confidence_level": 0.95,
                      "method": "weighted_bayesian"
                    }
                  },
                  "evidence": [
                    {
                      "evidence_id": "GMD-PRICE-20260201100000",
                      "evidence_type": "PRICE_CHANGE",
                      "title": "GMD price increased 0.88%",
                      "raw_value": 0.88,
                      "normalized_value": 0.088,
                      "source": "vnstock",
                      "timestamp": "2026-02-01T10:00:00Z"
                    }
                  ],
                  "timestamp": "2026-02-01T10:00:00Z"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-risk/partners": {
      "get": {
        "tags": [
          "Partner Risk (DEPRECATED)",
          "Partner Risk (DEPRECATED)"
        ],
        "summary": "⚠️ DEPRECATED - Use /api/v1/partner-signals/partners",
        "description": "**⚠️ This endpoint is DEPRECATED.**\n    \n    OMEN is a Signal Engine, not a Decision Engine.\n    \n    **Migration:**\n    - Use `GET /api/v1/partner-signals/partners` instead\n    - The new endpoint returns the same partner list",
        "operationId": "list_partners_api_v1_partner_risk_partners_get",
        "deprecated": true,
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response List Partners Api V1 Partner Risk Partners Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-risk/partners/{symbol}": {
      "get": {
        "tags": [
          "Partner Risk (DEPRECATED)",
          "Partner Risk (DEPRECATED)"
        ],
        "summary": "⚠️ DEPRECATED - Use /api/v1/partner-signals/{symbol}",
        "description": "⚠️ DEPRECATED - Get risk assessment for a specific partner.\n\nThis endpoint violates Signal Engine principles by returning risk verdicts.\n\n**Migration:**\n- Use `GET /api/v1/partner-signals/{symbol}` instead\n- The new endpoint returns signals/metrics\n- RiskCast should make risk decisions",
        "operationId": "get_partner_risk_api_v1_partner_risk_partners__symbol__get",
        "deprecated": true,
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "symbol",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Symbol"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Partner Risk Api V1 Partner Risk Partners  Symbol  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-risk/partners/{symbol}/price": {
      "get": {
        "tags": [
          "Partner Risk (DEPRECATED)",
          "Partner Risk (DEPRECATED)"
        ],
        "summary": "⚠️ DEPRECATED - Use /api/v1/partner-signals/{symbol}/price",
        "description": "⚠️ DEPRECATED - Use /api/v1/partner-signals/{symbol}/price instead.",
        "operationId": "get_partner_price_api_v1_partner_risk_partners__symbol__price_get",
        "deprecated": true,
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "symbol",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Symbol"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Partner Price Api V1 Partner Risk Partners  Symbol  Price Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-risk/partners/{symbol}/health": {
      "get": {
        "tags": [
          "Partner Risk (DEPRECATED)",
          "Partner Risk (DEPRECATED)"
        ],
        "summary": "⚠️ DEPRECATED - Use /api/v1/partner-signals/{symbol}/fundamentals",
        "description": "⚠️ DEPRECATED - Use /api/v1/partner-signals/{symbol}/fundamentals instead.",
        "operationId": "get_partner_health_api_v1_partner_risk_partners__symbol__health_get",
        "deprecated": true,
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "symbol",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Symbol"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Partner Health Api V1 Partner Risk Partners  Symbol  Health Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-risk/portfolio": {
      "get": {
        "tags": [
          "Partner Risk (DEPRECATED)",
          "Partner Risk (DEPRECATED)"
        ],
        "summary": "⚠️ DEPRECATED - Use /api/v1/partner-signals/",
        "description": "⚠️ DEPRECATED - This endpoint returns risk verdicts which violates Signal Engine principles.\n\n**Migration:**\n- Use `GET /api/v1/partner-signals/` instead\n- The new endpoint returns signals/metrics without risk verdicts\n- RiskCast should compute portfolio risk from signals",
        "operationId": "get_portfolio_summary_api_v1_partner_risk_portfolio_get",
        "deprecated": true,
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "symbols",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Symbols"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Portfolio Summary Api V1 Partner Risk Portfolio Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-risk/alerts": {
      "get": {
        "tags": [
          "Partner Risk (DEPRECATED)",
          "Partner Risk (DEPRECATED)"
        ],
        "summary": "⚠️ DEPRECATED - Signal Engine does not emit alerts",
        "description": "⚠️ DEPRECATED - OMEN is a Signal Engine, not an Alert Engine.\n\n**Migration:**\n- Use `GET /api/v1/partner-signals/` to get signals\n- RiskCast should evaluate signals and generate alerts based on business rules",
        "operationId": "get_risk_alerts_api_v1_partner_risk_alerts_get",
        "deprecated": true,
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "min_level",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "CAUTION",
                "WARNING",
                "CRITICAL"
              ],
              "type": "string",
              "default": "WARNING",
              "title": "Min Level"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Risk Alerts Api V1 Partner Risk Alerts Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/partner-risk/webhook/clawbot": {
      "post": {
        "tags": [
          "Partner Risk (DEPRECATED)",
          "Partner Risk (DEPRECATED)"
        ],
        "summary": "⚠️ DEPRECATED - Clawbot integration moved to RiskCast",
        "description": "⚠️ DEPRECATED - Clawbot notification should be triggered by RiskCast, not OMEN.\n\n**Migration:**\n- RiskCast should consume signals from OMEN\n- RiskCast evaluates risk and triggers Clawbot notifications\n- OMEN only provides signals, not notifications",
        "operationId": "trigger_clawbot_notification_api_v1_partner_risk_webhook_clawbot_post",
        "deprecated": true,
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Trigger Clawbot Notification Api V1 Partner Risk Webhook Clawbot Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ui/overview": {
      "get": {
        "tags": [
          "UI"
        ],
        "summary": "Get Overview",
        "description": "Overview stats for dashboard KPIs.\nUses real pipeline metrics and activity; partitions/reconcile are 0 until ledger/riskcast integrated.",
        "operationId": "get_overview_api_ui_overview_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ui/partitions": {
      "get": {
        "tags": [
          "UI"
        ],
        "summary": "List Partitions",
        "description": "List ledger partitions (stub: empty list).",
        "operationId": "list_partitions_api_ui_partitions_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "name": "includeLate",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Includelate"
            }
          },
          {
            "name": "needsReconcile",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Needsreconcile"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ui/partitions/{partition_date}": {
      "get": {
        "tags": [
          "UI"
        ],
        "summary": "Get Partition Detail",
        "description": "Partition detail (stub: null).",
        "operationId": "get_partition_detail_api_ui_partitions__partition_date__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "partition_date",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Partition Date"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ui/partitions/{partition_date}/diff": {
      "get": {
        "tags": [
          "UI"
        ],
        "summary": "Get Partition Diff",
        "description": "Partition diff (stub: empty).",
        "operationId": "get_partition_diff_api_ui_partitions__partition_date__diff_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "partition_date",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Partition Date"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ui/partitions/{partition_date}/reconcile": {
      "post": {
        "tags": [
          "UI"
        ],
        "summary": "Run Reconcile",
        "description": "Run reconcile (stub).",
        "operationId": "run_reconcile_api_ui_partitions__partition_date__reconcile_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "partition_date",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Partition Date"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ui/signals": {
      "get": {
        "tags": [
          "UI"
        ],
        "summary": "List Signals",
        "description": "List signals (stub: empty list).",
        "operationId": "list_signals_api_ui_signals_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "partition",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Partition"
            }
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Category"
            }
          },
          {
            "name": "confidence",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Confidence"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Search"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Limit"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {},
                "example": {
                  "items": [
                    {
                      "signal_id": "sig-poly-12345",
                      "signal_type": "MARKET_MOVEMENT",
                      "title": "Polymarket: US Election probability shift",
                      "description": "Significant movement in election prediction markets",
                      "probability": 0.65,
                      "confidence": 0.88,
                      "keywords": [
                        "election",
                        "politics",
                        "prediction"
                      ],
                      "source": "polymarket",
                      "timestamp": "2026-02-01T10:00:00Z"
                    }
                  ],
                  "has_more": false,
                  "cursor": null
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ui/ledger/{partition_date}/segments": {
      "get": {
        "tags": [
          "UI"
        ],
        "summary": "List Ledger Segments",
        "description": "List ledger segments (stub: empty).",
        "operationId": "list_ledger_segments_api_ui_ledger__partition_date__segments_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "partition_date",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Partition Date"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ui/ledger/{partition_date}/segments/{segment_file}/frames/{frame_index}": {
      "get": {
        "tags": [
          "UI"
        ],
        "summary": "Read Ledger Frame",
        "description": "Read one ledger frame (stub).",
        "operationId": "read_ledger_frame_api_ui_ledger__partition_date__segments__segment_file__frames__frame_index__get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "partition_date",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Partition Date"
            }
          },
          {
            "name": "segment_file",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Segment File"
            }
          },
          {
            "name": "frame_index",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Frame Index"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/ui/ledger/{partition_date}/segments/{segment_file}/simulate-crash-tail": {
      "post": {
        "tags": [
          "UI"
        ],
        "summary": "Simulate Crash Tail",
        "description": "Crash-tail simulation (stub: not supported).",
        "operationId": "simulate_crash_tail_api_ui_ledger__partition_date__segments__segment_file__simulate_crash_tail_post",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "partition_date",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Partition Date"
            }
          },
          {
            "name": "segment_file",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Segment File"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "type": "object",
                    "additionalProperties": true
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Body"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/debug/rejections": {
      "get": {
        "tags": [
          "Debug (DEV ONLY)",
          "Debug"
        ],
        "summary": "Get Rejections",
        "description": "Get recent rejected events with reasons.\n\nUse this to understand WHY events are being filtered out.\n\n**Requires scope:** `debug`",
        "operationId": "get_rejections_api_v1_debug_rejections_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "stage",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "enum": [
                    "ingestion",
                    "mapping",
                    "validation",
                    "translation",
                    "generation"
                  ],
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Stage"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/debug/passed": {
      "get": {
        "tags": [
          "Debug (DEV ONLY)",
          "Debug"
        ],
        "summary": "Get Passed",
        "description": "Get recently passed/generated signals.\n\n**Requires scope:** `debug`",
        "operationId": "get_passed_api_v1_debug_passed_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/debug/statistics": {
      "get": {
        "tags": [
          "Debug (DEV ONLY)",
          "Debug"
        ],
        "summary": "Get Pipeline Statistics",
        "description": "Get overall pipeline statistics.\n\nShows pass/rejection rates and breakdown by stage.\n\n**Requires scope:** `debug`",
        "operationId": "get_pipeline_statistics_api_v1_debug_statistics_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/debug/data": {
      "delete": {
        "tags": [
          "Debug (DEV ONLY)",
          "Debug"
        ],
        "summary": "Clear Debug Data",
        "description": "Clear all debug records.\n\n**Requires scope:** `debug`",
        "operationId": "clear_debug_data_api_v1_debug_data_delete",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "api_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Api Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ActivityItemResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "type": {
            "type": "string",
            "enum": [
              "signal",
              "validation",
              "rule",
              "alert",
              "source",
              "error",
              "system"
            ],
            "title": "Type"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp"
          },
          "details": {
            "additionalProperties": true,
            "type": "object",
            "title": "Details",
            "default": {}
          }
        },
        "type": "object",
        "required": [
          "id",
          "type",
          "message",
          "timestamp"
        ],
        "title": "ActivityItemResponse",
        "description": "Single activity item from the system."
      },
      "CircuitBreakerUpdateRequest": {
        "properties": {
          "state": {
            "type": "string",
            "title": "State",
            "description": "Target state: 'closed' to reset"
          }
        },
        "type": "object",
        "required": [
          "state"
        ],
        "title": "CircuitBreakerUpdateRequest",
        "description": "Request to update circuit breaker state."
      },
      "EvidenceResponse": {
        "properties": {
          "source": {
            "type": "string",
            "title": "Source"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type"
          },
          "url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Url"
          }
        },
        "type": "object",
        "required": [
          "source",
          "source_type"
        ],
        "title": "EvidenceResponse",
        "description": "Evidence item in API response."
      },
      "GeographicContextResponse": {
        "properties": {
          "regions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Regions",
            "default": []
          },
          "chokepoints": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Chokepoints",
            "default": []
          }
        },
        "type": "object",
        "title": "GeographicContextResponse",
        "description": "Geographic context in API response."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthCheckResult": {
        "properties": {
          "status": {
            "$ref": "#/components/schemas/HealthStatus",
            "description": "Current health status"
          },
          "source_name": {
            "type": "string",
            "title": "Source Name",
            "description": "Unique identifier for the source"
          },
          "latency_ms": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latency Ms",
            "description": "Response latency in milliseconds"
          },
          "last_success": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Success",
            "description": "Timestamp of last successful check"
          },
          "last_failure": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Failure",
            "description": "Timestamp of last failed check"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Error message if unhealthy"
          },
          "consecutive_failures": {
            "type": "integer",
            "title": "Consecutive Failures",
            "description": "Number of consecutive failures",
            "default": 0
          },
          "details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Additional source-specific details"
          },
          "checked_at": {
            "type": "string",
            "format": "date-time",
            "title": "Checked At"
          }
        },
        "type": "object",
        "required": [
          "status",
          "source_name"
        ],
        "title": "HealthCheckResult",
        "description": "Result of a health check operation."
      },
      "HealthStatus": {
        "type": "string",
        "enum": [
          "healthy",
          "degraded",
          "unhealthy",
          "unknown"
        ],
        "title": "HealthStatus",
        "description": "Health status levels for data sources."
      },
      "ImpactHintsResponse": {
        "properties": {
          "domains": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Domains",
            "default": []
          },
          "direction": {
            "type": "string",
            "title": "Direction",
            "default": "unknown"
          },
          "affected_asset_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Affected Asset Types",
            "default": []
          },
          "keywords": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Keywords",
            "default": []
          }
        },
        "type": "object",
        "title": "ImpactHintsResponse",
        "description": "Routing metadata response. NOT impact data."
      },
      "MethodologyDetail": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "version": {
            "type": "string",
            "title": "Version"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "formula": {
            "type": "string",
            "title": "Formula"
          },
          "formula_latex": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Formula Latex"
          },
          "inputs": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Inputs",
            "default": {}
          },
          "outputs": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Outputs",
            "default": {}
          },
          "parameters": {
            "additionalProperties": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "object",
            "title": "Parameters",
            "default": {}
          },
          "primary_source": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Source"
          },
          "supporting_sources": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Supporting Sources",
            "default": []
          },
          "assumptions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Assumptions",
            "default": []
          },
          "limitations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Limitations",
            "default": []
          },
          "validation": {
            "additionalProperties": true,
            "type": "object",
            "title": "Validation",
            "default": {}
          },
          "version_info": {
            "additionalProperties": true,
            "type": "object",
            "title": "Version Info",
            "default": {}
          }
        },
        "type": "object",
        "required": [
          "name",
          "version",
          "description",
          "formula"
        ],
        "title": "MethodologyDetail",
        "description": "Full methodology details."
      },
      "MethodologySummary": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "version": {
            "type": "string",
            "title": "Version"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "validation_status": {
            "type": "string",
            "title": "Validation Status"
          },
          "primary_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Source"
          }
        },
        "type": "object",
        "required": [
          "name",
          "version",
          "description",
          "validation_status"
        ],
        "title": "MethodologySummary",
        "description": "Summary of a methodology."
      },
      "MultiSourceResponse": {
        "properties": {
          "signals": {
            "items": {
              "$ref": "#/components/schemas/MultiSourceSignal"
            },
            "type": "array",
            "title": "Signals"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "by_source": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "By Source"
          },
          "fetch_time_ms": {
            "type": "number",
            "title": "Fetch Time Ms"
          }
        },
        "type": "object",
        "required": [
          "signals",
          "total",
          "by_source",
          "fetch_time_ms"
        ],
        "title": "MultiSourceResponse",
        "description": "Response from multi-source fetch."
      },
      "MultiSourceSignal": {
        "properties": {
          "event_id": {
            "type": "string",
            "title": "Event Id"
          },
          "source": {
            "type": "string",
            "title": "Source"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "probability": {
            "type": "number",
            "title": "Probability"
          },
          "keywords": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Keywords"
          },
          "locations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Locations"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp"
          },
          "source_metrics": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Metrics"
          }
        },
        "type": "object",
        "required": [
          "event_id",
          "source",
          "title",
          "description",
          "probability",
          "keywords",
          "locations",
          "timestamp"
        ],
        "title": "MultiSourceSignal",
        "description": "Signal from multi-source aggregation."
      },
      "PartnerSignalConfidence": {
        "properties": {
          "overall_confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Overall Confidence",
            "description": "0-1 confidence score"
          },
          "data_completeness": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Data Completeness",
            "description": "% fields with data"
          },
          "data_freshness_seconds": {
            "type": "integer",
            "title": "Data Freshness Seconds",
            "description": "Age of data in seconds"
          },
          "price_data_confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Price Data Confidence",
            "default": 1.0
          },
          "fundamental_data_confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Fundamental Data Confidence",
            "default": 0.0
          },
          "volume_data_confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Volume Data Confidence",
            "default": 1.0
          },
          "missing_fields": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Missing Fields"
          },
          "data_source": {
            "type": "string",
            "title": "Data Source",
            "description": "vnstock, yfinance, etc."
          },
          "data_source_reliability": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Data Source Reliability"
          }
        },
        "type": "object",
        "required": [
          "overall_confidence",
          "data_completeness",
          "data_freshness_seconds",
          "data_source",
          "data_source_reliability"
        ],
        "title": "PartnerSignalConfidence",
        "description": "Confidence and data quality indicators."
      },
      "PartnerSignalEvidence": {
        "properties": {
          "evidence_id": {
            "type": "string",
            "title": "Evidence Id"
          },
          "evidence_type": {
            "type": "string",
            "title": "Evidence Type"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "raw_value": {
            "type": "number",
            "title": "Raw Value"
          },
          "normalized_value": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Normalized Value"
          },
          "threshold_reference": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Threshold Reference"
          },
          "source": {
            "type": "string",
            "title": "Source"
          },
          "observed_at": {
            "type": "string",
            "format": "date-time",
            "title": "Observed At"
          }
        },
        "type": "object",
        "required": [
          "evidence_id",
          "evidence_type",
          "title",
          "raw_value",
          "normalized_value",
          "source",
          "observed_at"
        ],
        "title": "PartnerSignalEvidence",
        "description": "Evidence trail for audit."
      },
      "PartnerSignalMetrics": {
        "properties": {
          "price_current": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Price Current",
            "description": "Current price (x1000 VND)"
          },
          "price_open": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Price Open"
          },
          "price_high": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Price High"
          },
          "price_low": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Price Low"
          },
          "price_close_previous": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Price Close Previous"
          },
          "price_change_percent": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Price Change Percent",
            "description": "% change vs previous close"
          },
          "price_change_absolute": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Price Change Absolute"
          },
          "volume": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Volume"
          },
          "volume_avg_20d": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Volume Avg 20D"
          },
          "volume_ratio": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Volume Ratio",
            "description": "volume / avg_20d"
          },
          "volume_anomaly_zscore": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Volume Anomaly Zscore",
            "description": "Z-score of volume"
          },
          "volatility_20d": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Volatility 20D",
            "description": "20-day volatility (std dev)"
          },
          "volatility_percentile": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Volatility Percentile",
            "description": "Volatility vs history"
          },
          "trend_1d": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trend 1D",
            "description": "% change 1 day"
          },
          "trend_7d": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trend 7D",
            "description": "% change 7 days"
          },
          "trend_30d": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trend 30D",
            "description": "% change 30 days"
          },
          "trend_ytd": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trend Ytd",
            "description": "% change YTD"
          },
          "pe_ratio": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pe Ratio"
          },
          "pb_ratio": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pb Ratio"
          },
          "roe": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Roe"
          },
          "roa": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Roa"
          },
          "debt_to_equity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Debt To Equity"
          },
          "current_ratio": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Ratio"
          },
          "market_cap": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Market Cap"
          },
          "distance_from_52w_high": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Distance From 52W High",
            "description": "% from 52-week high"
          },
          "distance_from_52w_low": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Distance From 52W Low",
            "description": "% from 52-week low"
          },
          "liquidity_score": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Liquidity Score",
            "description": "0-1, 1 = very liquid"
          },
          "bid_ask_spread": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bid Ask Spread"
          }
        },
        "type": "object",
        "title": "PartnerSignalMetrics",
        "description": "Raw signal metrics for a partner - NO VERDICT.\nRiskCast will decide risk level based on these metrics."
      },
      "PartnerSignalResponse": {
        "properties": {
          "symbol": {
            "type": "string",
            "title": "Symbol"
          },
          "company_name": {
            "type": "string",
            "title": "Company Name"
          },
          "sector": {
            "type": "string",
            "title": "Sector",
            "default": "logistics"
          },
          "exchange": {
            "type": "string",
            "title": "Exchange",
            "description": "HOSE, HNX, UPCOM",
            "default": "HOSE"
          },
          "signals": {
            "$ref": "#/components/schemas/PartnerSignalMetrics"
          },
          "confidence": {
            "$ref": "#/components/schemas/PartnerSignalConfidence"
          },
          "evidence": {
            "items": {
              "$ref": "#/components/schemas/PartnerSignalEvidence"
            },
            "type": "array",
            "title": "Evidence"
          },
          "market_context": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Market Context",
            "description": "VNINDEX, sector performance"
          },
          "omen_suggestion": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Omen Suggestion",
            "description": "OMEN's suggestion - NOT a decision. RiskCast must make final call."
          },
          "suggestion_confidence": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggestion Confidence"
          },
          "suggestion_disclaimer": {
            "type": "string",
            "title": "Suggestion Disclaimer",
            "default": "This is OMEN's signal-based suggestion only. RiskCast should make final risk decision based on order context, user risk appetite, and business rules."
          },
          "signal_id": {
            "type": "string",
            "title": "Signal Id",
            "description": "Unique signal ID for tracing"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "omen_version": {
            "type": "string",
            "title": "Omen Version",
            "default": "2.0.0"
          },
          "schema_version": {
            "type": "string",
            "title": "Schema Version",
            "default": "2.0.0"
          }
        },
        "type": "object",
        "required": [
          "symbol",
          "company_name",
          "signals",
          "confidence",
          "signal_id",
          "timestamp"
        ],
        "title": "PartnerSignalResponse",
        "description": "🔥 MAIN RESPONSE MODEL - Pure Signals, NO VERDICT\n\nOMEN sends signals + evidence + confidence.\nRiskCast decides SAFE/WARNING/CRITICAL."
      },
      "PartnerSignalsListResponse": {
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "total_partners": {
            "type": "integer",
            "title": "Total Partners"
          },
          "market_context": {
            "additionalProperties": true,
            "type": "object",
            "title": "Market Context"
          },
          "partners": {
            "items": {
              "$ref": "#/components/schemas/PartnerSignalResponse"
            },
            "type": "array",
            "title": "Partners"
          },
          "aggregated_metrics": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Aggregated Metrics",
            "description": "Avg volatility, avg liquidity, etc. - NO risk verdict"
          },
          "data_quality": {
            "additionalProperties": true,
            "type": "object",
            "title": "Data Quality"
          }
        },
        "type": "object",
        "required": [
          "timestamp",
          "total_partners",
          "partners"
        ],
        "title": "PartnerSignalsListResponse",
        "description": "Response for multiple partners."
      },
      "PipelineStatsResponse": {
        "properties": {
          "total_processed": {
            "type": "integer",
            "title": "Total Processed"
          },
          "total_passed": {
            "type": "integer",
            "title": "Total Passed"
          },
          "total_rejected": {
            "type": "integer",
            "title": "Total Rejected"
          },
          "pass_rate": {
            "type": "number",
            "title": "Pass Rate"
          },
          "rejection_by_stage": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Rejection By Stage"
          },
          "latency_ms": {
            "type": "number",
            "title": "Latency Ms",
            "default": 0
          },
          "uptime_seconds": {
            "type": "integer",
            "title": "Uptime Seconds",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "total_processed",
          "total_passed",
          "total_rejected",
          "pass_rate",
          "rejection_by_stage"
        ],
        "title": "PipelineStatsResponse",
        "description": "Pipeline statistics (e.g. from /signals/stats)."
      },
      "RealtimeStatus": {
        "properties": {
          "registered_signals": {
            "type": "integer",
            "title": "Registered Signals"
          },
          "websocket_connected": {
            "type": "boolean",
            "title": "Websocket Connected"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "registered_signal_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Registered Signal Ids"
          }
        },
        "type": "object",
        "required": [
          "registered_signals",
          "websocket_connected",
          "status",
          "registered_signal_ids"
        ],
        "title": "RealtimeStatus",
        "description": "Status of real-time streaming."
      },
      "SignalListResponse": {
        "properties": {
          "signals": {
            "items": {
              "$ref": "#/components/schemas/SignalResponse"
            },
            "type": "array",
            "title": "Signals"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "processed": {
            "type": "integer",
            "title": "Processed"
          },
          "passed": {
            "type": "integer",
            "title": "Passed"
          },
          "rejected": {
            "type": "integer",
            "title": "Rejected"
          },
          "pass_rate": {
            "type": "number",
            "title": "Pass Rate"
          }
        },
        "type": "object",
        "required": [
          "signals",
          "total",
          "processed",
          "passed",
          "rejected",
          "pass_rate"
        ],
        "title": "SignalListResponse",
        "description": "Response for list of signals (e.g. from /signals/process)."
      },
      "SignalResponse": {
        "properties": {
          "signal_id": {
            "type": "string",
            "title": "Signal Id"
          },
          "source_event_id": {
            "type": "string",
            "title": "Source Event Id"
          },
          "signal_type": {
            "type": "string",
            "title": "Signal Type",
            "description": "Signal classification",
            "default": "UNCLASSIFIED"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Lifecycle status",
            "default": "ACTIVE"
          },
          "impact_hints": {
            "$ref": "#/components/schemas/ImpactHintsResponse",
            "description": "Routing hints for downstream"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "probability": {
            "type": "number",
            "title": "Probability",
            "description": "Probability from source market (0-1)"
          },
          "probability_source": {
            "type": "string",
            "title": "Probability Source"
          },
          "probability_is_estimate": {
            "type": "boolean",
            "title": "Probability Is Estimate",
            "default": false
          },
          "confidence_score": {
            "type": "number",
            "title": "Confidence Score",
            "description": "OMEN's confidence in signal quality (0-1, rounded to 4 decimals)"
          },
          "confidence_level": {
            "type": "string",
            "title": "Confidence Level"
          },
          "confidence_factors": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Confidence Factors",
            "default": {}
          },
          "category": {
            "type": "string",
            "title": "Category"
          },
          "tags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Tags",
            "default": []
          },
          "geographic": {
            "$ref": "#/components/schemas/GeographicContextResponse"
          },
          "temporal": {
            "$ref": "#/components/schemas/TemporalContextResponse"
          },
          "evidence": {
            "items": {
              "$ref": "#/components/schemas/EvidenceResponse"
            },
            "type": "array",
            "title": "Evidence",
            "default": []
          },
          "trace_id": {
            "type": "string",
            "title": "Trace Id"
          },
          "ruleset_version": {
            "type": "string",
            "title": "Ruleset Version"
          },
          "source_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Url"
          },
          "observed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Observed At",
            "description": "When source data was observed (ISO 8601 UTC, if available)"
          },
          "generated_at": {
            "type": "string",
            "title": "Generated At",
            "description": "Timestamp when OMEN generated this signal (ISO 8601 UTC)"
          },
          "confidence_method": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence Method",
            "description": "Method used to calculate confidence_score"
          }
        },
        "type": "object",
        "required": [
          "signal_id",
          "source_event_id",
          "title",
          "probability",
          "probability_source",
          "confidence_score",
          "confidence_level",
          "category",
          "geographic",
          "temporal",
          "trace_id",
          "ruleset_version",
          "generated_at"
        ],
        "title": "SignalResponse",
        "description": "OMEN Signal Response — The public contract.\n\nWhat downstream systems (e.g. RiskCast) consume.\n\nContains:\n- Probability (from market)\n- Confidence (OMEN-computed)\n- Context (geographic, temporal)\n- Evidence chain\n\nDoes NOT contain:\n- Impact calculations (delay days, cost, etc.)\n- Recommendations\n- Time-horizon or relevance labels"
      },
      "SourceHealthResponse": {
        "properties": {
          "sources": {
            "items": {
              "$ref": "#/components/schemas/SourceInfo"
            },
            "type": "array",
            "title": "Sources"
          },
          "healthy_count": {
            "type": "integer",
            "title": "Healthy Count"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          }
        },
        "type": "object",
        "required": [
          "sources",
          "healthy_count",
          "total_count"
        ],
        "title": "SourceHealthResponse",
        "description": "Health status of all sources."
      },
      "SourceHealthSummary": {
        "properties": {
          "overall_status": {
            "$ref": "#/components/schemas/HealthStatus",
            "description": "Aggregate health status"
          },
          "total_sources": {
            "type": "integer",
            "title": "Total Sources",
            "description": "Total number of registered sources"
          },
          "healthy_count": {
            "type": "integer",
            "title": "Healthy Count",
            "default": 0
          },
          "degraded_count": {
            "type": "integer",
            "title": "Degraded Count",
            "default": 0
          },
          "unhealthy_count": {
            "type": "integer",
            "title": "Unhealthy Count",
            "default": 0
          },
          "unknown_count": {
            "type": "integer",
            "title": "Unknown Count",
            "default": 0
          },
          "sources": {
            "additionalProperties": {
              "$ref": "#/components/schemas/HealthCheckResult"
            },
            "type": "object",
            "title": "Sources"
          },
          "checked_at": {
            "type": "string",
            "format": "date-time",
            "title": "Checked At"
          },
          "cache_age_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cache Age Seconds",
            "description": "Age of cached data"
          }
        },
        "type": "object",
        "required": [
          "overall_status",
          "total_sources"
        ],
        "title": "SourceHealthSummary",
        "description": "Summary of all source health checks."
      },
      "SourceInfo": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled"
          },
          "priority": {
            "type": "integer",
            "title": "Priority"
          },
          "weight": {
            "type": "number",
            "title": "Weight"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "unknown"
          }
        },
        "type": "object",
        "required": [
          "name",
          "enabled",
          "priority",
          "weight"
        ],
        "title": "SourceInfo",
        "description": "Information about a signal source."
      },
      "SourceUpdateRequest": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "Enable or disable the source"
          }
        },
        "type": "object",
        "required": [
          "enabled"
        ],
        "title": "SourceUpdateRequest",
        "description": "Request to update a source's configuration."
      },
      "SubscribeRequest": {
        "properties": {
          "signal_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Signal Ids"
          }
        },
        "type": "object",
        "required": [
          "signal_ids"
        ],
        "title": "SubscribeRequest",
        "description": "Request to subscribe to signal updates."
      },
      "SubscribeResponse": {
        "properties": {
          "subscribed": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Subscribed"
          },
          "not_found": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Not Found"
          },
          "total_registered": {
            "type": "integer",
            "title": "Total Registered"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "subscribed",
          "not_found",
          "total_registered",
          "message"
        ],
        "title": "SubscribeResponse",
        "description": "Response from subscribe request."
      },
      "SystemStatsResponse": {
        "properties": {
          "total_signals": {
            "type": "integer",
            "title": "Total Signals",
            "description": "Signals in the measurement window"
          },
          "signals_by_confidence": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Signals By Confidence",
            "description": "Count by confidence level: HIGH, MEDIUM, LOW"
          },
          "signals_by_category": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Signals By Category",
            "description": "Count by signal category"
          },
          "average_confidence_score": {
            "type": "number",
            "title": "Average Confidence Score",
            "description": "Weighted average confidence of generated signals (0-1)"
          },
          "signals_with_high_probability": {
            "type": "integer",
            "title": "Signals With High Probability",
            "description": "Signals with probability > 0.7",
            "default": 0
          },
          "signals_with_low_confidence": {
            "type": "integer",
            "title": "Signals With Low Confidence",
            "description": "Signals with confidence < 0.5",
            "default": 0
          },
          "validation_pass_rate": {
            "type": "number",
            "title": "Validation Pass Rate",
            "description": "events_validated / events_processed"
          },
          "signals_by_time_horizon": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Signals By Time Horizon",
            "description": "Count by horizon: 24h, 7d, 30d (when available)"
          },
          "events_processed": {
            "type": "integer",
            "title": "Events Processed",
            "description": "Lifetime events received"
          },
          "events_validated": {
            "type": "integer",
            "title": "Events Validated",
            "description": "Lifetime events that passed validation"
          },
          "signals_generated": {
            "type": "integer",
            "title": "Signals Generated",
            "description": "Lifetime signals emitted"
          },
          "events_rejected": {
            "type": "integer",
            "title": "Events Rejected",
            "description": "Lifetime events rejected"
          },
          "system_latency_ms": {
            "type": "number",
            "title": "System Latency Ms",
            "description": "Average processing latency (ms)"
          },
          "events_per_minute": {
            "type": "number",
            "title": "Events Per Minute",
            "description": "Processing rate in window"
          },
          "uptime_seconds": {
            "type": "integer",
            "title": "Uptime Seconds",
            "description": "Seconds since collector start"
          },
          "memory_usage_mb": {
            "type": "integer",
            "title": "Memory Usage Mb",
            "description": "Process RSS in MB",
            "default": 0
          },
          "cpu_percent": {
            "type": "number",
            "title": "Cpu Percent",
            "description": "CPU usage percent",
            "default": 0.0
          },
          "polymarket_status": {
            "type": "string",
            "title": "Polymarket Status",
            "description": "Source status when available",
            "default": "unknown"
          },
          "polymarket_events_per_min": {
            "type": "number",
            "title": "Polymarket Events Per Min",
            "description": "Source rate when available",
            "default": 0.0
          }
        },
        "type": "object",
        "required": [
          "total_signals",
          "average_confidence_score",
          "validation_pass_rate",
          "events_processed",
          "events_validated",
          "signals_generated",
          "events_rejected",
          "system_latency_ms",
          "events_per_minute",
          "uptime_seconds"
        ],
        "title": "SystemStatsResponse",
        "description": "Signal-quality statistics only.\n\nDoes NOT include: impact metrics, risk quantification, severity, or time-horizon labels."
      },
      "TemporalContextResponse": {
        "properties": {
          "event_horizon": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Event Horizon"
          },
          "resolution_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolution Date"
          }
        },
        "type": "object",
        "title": "TemporalContextResponse",
        "description": "Temporal context in API response."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    },
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key",
        "description": "API key for authentication"
      },
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token (optional, if enabled)"
      }
    }
  },
  "servers": [
    {
      "url": "https://api.omen.io",
      "description": "Production server"
    },
    {
      "url": "https://staging-api.omen.io",
      "description": "Staging server"
    },
    {
      "url": "http://localhost:8000",
      "description": "Local development"
    }
  ],
  "security": [
    {
      "ApiKeyAuth": []
    }
  ],
  "tags": [
    {
      "name": "Health",
      "description": "Health check endpoints (public)"
    },
    {
      "name": "Signals",
      "description": "Core signal intelligence API"
    },
    {
      "name": "Partner Signals",
      "description": "Partner financial signals (metrics only, no risk verdicts)"
    },
    {
      "name": "Partner Risk (DEPRECATED)",
      "description": "⚠️ DEPRECATED - Use Partner Signals instead"
    },
    {
      "name": "Multi-Source Intelligence",
      "description": "Aggregated signals from multiple sources"
    },
    {
      "name": "Explanations",
      "description": "Signal explanation and audit trails"
    },
    {
      "name": "Methodology",
      "description": "OMEN methodology documentation"
    },
    {
      "name": "Statistics",
      "description": "Pipeline statistics and metrics"
    },
    {
      "name": "Storage",
      "description": "Ledger storage management"
    },
    {
      "name": "Realtime",
      "description": "Real-time price streaming (SSE)"
    },
    {
      "name": "Activity",
      "description": "Activity feed and audit log"
    }
  ]
}