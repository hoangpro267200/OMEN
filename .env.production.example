# ═══════════════════════════════════════════════════════════════════════════════
# OMEN Production Configuration
# ═══════════════════════════════════════════════════════════════════════════════
# Copy this file to .env.production and fill in all required values.
# All values marked (REQUIRED) must be set before deploying to production.
#
# Security Notes:
# - Never commit .env.production to version control
# - Use secrets management (Vault, AWS Secrets Manager) for sensitive values
# - Rotate credentials regularly
# ═══════════════════════════════════════════════════════════════════════════════

# ─── Environment ───────────────────────────────────────────────────────────────
OMEN_ENV=production

# ─── Database (REQUIRED) ───────────────────────────────────────────────────────
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://omen:CHANGE_THIS_PASSWORD@db.example.com:5432/omen_prod

# ─── Redis (REQUIRED for distributed deployments) ──────────────────────────────
# Redis connection URL
# Format: redis://:password@host:port/db
REDIS_URL=redis://:CHANGE_THIS_PASSWORD@redis.example.com:6379/0

# ─── Authentication (REQUIRED) ─────────────────────────────────────────────────
# API Keys: Comma-separated list of valid API keys
# Generate with: openssl rand -hex 32
# Each key must be at least 32 characters
OMEN_SECURITY_API_KEYS=your-api-key-here-min-32-chars,another-key-if-needed

# JWT Configuration (optional, enable if needed)
OMEN_SECURITY_JWT_ENABLED=false
# If JWT enabled, set a strong secret (min 32 chars):
# Generate with: openssl rand -hex 32
OMEN_SECURITY_JWT_SECRET=your-jwt-secret-here-min-32-characters
OMEN_SECURITY_JWT_EXPIRY_HOURS=24

# ─── CORS (REQUIRED) ───────────────────────────────────────────────────────────
# Comma-separated list of allowed origins
# Do NOT use * in production
OMEN_SECURITY_CORS_ORIGINS=https://your-domain.com,https://app.your-domain.com
OMEN_SECURITY_CORS_ALLOW_CREDENTIALS=false

# ─── Rate Limiting ─────────────────────────────────────────────────────────────
OMEN_SECURITY_RATE_LIMIT_ENABLED=true
OMEN_SECURITY_RATE_LIMIT_REQUESTS_PER_MINUTE=100
OMEN_SECURITY_RATE_LIMIT_BURST=20

# ─── Data Sources (REQUIRED: at least one) ─────────────────────────────────────
# Polymarket (primary source for prediction markets)
POLYMARKET_API_KEY=your-polymarket-api-key

# AIS Data (optional, for shipping vessel tracking)
OMEN_AIS_PROVIDER=aisstream
OMEN_AIS_API_KEY=your-aisstream-api-key

# Weather Data (optional)
OMEN_WEATHER_PROVIDER=openmeteo
# OpenMeteo is free, no API key needed

# News Data (optional)
NEWS_API_KEY=your-newsdata-api-key

# Stock Data (optional)
ALPHAVANTAGE_API_KEY=your-alphavantage-key

# ─── Webhook (optional) ────────────────────────────────────────────────────────
# URL to POST signals to
OMEN_WEBHOOK_URL=
# HMAC secret for webhook signature (optional)
OMEN_WEBHOOK_SECRET=
OMEN_WEBHOOK_TIMEOUT_SECONDS=30
OMEN_WEBHOOK_RETRY_ATTEMPTS=3

# ─── Kafka (optional, for event streaming) ─────────────────────────────────────
# Comma-separated broker addresses
KAFKA_BOOTSTRAP_SERVERS=
KAFKA_TOPIC=omen.signals
KAFKA_CLIENT_ID=omen-producer

# ─── Observability ─────────────────────────────────────────────────────────────
OMEN_LOG_LEVEL=INFO
OMEN_LOG_FORMAT=json

# Sentry DSN for error tracking (optional but recommended)
SENTRY_DSN=

# OpenTelemetry endpoint (optional)
OTLP_ENDPOINT=

# ─── Performance ───────────────────────────────────────────────────────────────
# Signal processing
OMEN_MIN_CONFIDENCE_FOR_OUTPUT=0.3
OMEN_MIN_LIQUIDITY_USD=1000
OMEN_MIN_VOLUME_USD=5000

# Background signal generator
OMEN_SIGNAL_POLL_INTERVAL=120

# Request limits
OMEN_MAX_REQUEST_BODY_SIZE=10485760

# ─── Feature Flags ─────────────────────────────────────────────────────────────
# MUST be false in production
OMEN_DEBUG_ENDPOINTS=false

# Background services
OMEN_BACKGROUND_GENERATOR_ENABLED=true

# Cross-source correlation
OMEN_CROSS_SOURCE_CORRELATION_ENABLED=true

# ─── Ledger / Storage ──────────────────────────────────────────────────────────
OMEN_LEDGER_BASE_PATH=/data/ledger

# Retention policy (days)
OMEN_RETENTION_HOT_RETENTION_DAYS=7
OMEN_RETENTION_WARM_RETENTION_DAYS=30
OMEN_RETENTION_COLD_RETENTION_DAYS=365

# ─── RiskCast Integration ──────────────────────────────────────────────────────
RISKCAST_URL=http://riskcast:8001
